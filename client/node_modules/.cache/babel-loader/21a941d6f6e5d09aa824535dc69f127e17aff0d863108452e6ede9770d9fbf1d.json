{"ast":null,"code":"import axios from 'axios';\n\n// Determine API base URL with environment override and sensible fallbacks\n// - REACT_APP_API_URL: e.g. http://192.168.1.100:5000/api for cross-device/dev\n// - Same-host fallback: http(s)://<current-host>:5000/api when running client and server on same machine\n// - Final fallback: http://localhost:5000/api\nfunction resolveBaseURL() {\n  const envUrl = process.env.REACT_APP_API_URL && process.env.REACT_APP_API_URL.trim();\n  if (envUrl) return envUrl;\n  if (typeof window !== 'undefined' && window.location) {\n    const {\n      protocol,\n      hostname\n    } = window.location;\n    // Preserve current page protocol (http or https) in case of dev over https via proxy\n    return `${protocol}//${hostname}:5000/api`;\n  }\n  return 'http://localhost:5000/api';\n}\nconst instance = axios.create({\n  baseURL: resolveBaseURL()\n});\ninstance.interceptors.request.use(config => {\n  const userRaw = typeof localStorage !== 'undefined' ? localStorage.getItem('user') : null;\n  try {\n    const user = userRaw ? JSON.parse(userRaw) : null;\n    if (user && user.token) {\n      config.headers.Authorization = `Bearer ${user.token}`;\n    }\n  } catch (_) {\n    // ignore malformed localStorage\n  }\n  return config;\n});\nexport default instance;","map":{"version":3,"names":["axios","resolveBaseURL","envUrl","process","env","REACT_APP_API_URL","trim","window","location","protocol","hostname","instance","create","baseURL","interceptors","request","use","config","userRaw","localStorage","getItem","user","JSON","parse","token","headers","Authorization","_"],"sources":["E:/Project/animal-rescue-adoption-platform/client/src/api/axios.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Determine API base URL with environment override and sensible fallbacks\r\n// - REACT_APP_API_URL: e.g. http://192.168.1.100:5000/api for cross-device/dev\r\n// - Same-host fallback: http(s)://<current-host>:5000/api when running client and server on same machine\r\n// - Final fallback: http://localhost:5000/api\r\nfunction resolveBaseURL() {\r\n  const envUrl = process.env.REACT_APP_API_URL && process.env.REACT_APP_API_URL.trim();\r\n  if (envUrl) return envUrl;\r\n\r\n  if (typeof window !== 'undefined' && window.location) {\r\n    const { protocol, hostname } = window.location;\r\n    // Preserve current page protocol (http or https) in case of dev over https via proxy\r\n    return `${protocol}//${hostname}:5000/api`;\r\n  }\r\n\r\n  return 'http://localhost:5000/api';\r\n}\r\n\r\nconst instance = axios.create({\r\n  baseURL: resolveBaseURL(),\r\n});\r\n\r\ninstance.interceptors.request.use((config) => {\r\n  const userRaw = typeof localStorage !== 'undefined' ? localStorage.getItem('user') : null;\r\n  try {\r\n    const user = userRaw ? JSON.parse(userRaw) : null;\r\n    if (user && user.token) {\r\n      config.headers.Authorization = `Bearer ${user.token}`;\r\n    }\r\n  } catch (_) {\r\n    // ignore malformed localStorage\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default instance;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA;AACA;AACA;AACA,SAASC,cAAcA,CAAA,EAAG;EACxB,MAAMC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAIF,OAAO,CAACC,GAAG,CAACC,iBAAiB,CAACC,IAAI,CAAC,CAAC;EACpF,IAAIJ,MAAM,EAAE,OAAOA,MAAM;EAEzB,IAAI,OAAOK,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,QAAQ,EAAE;IACpD,MAAM;MAAEC,QAAQ;MAAEC;IAAS,CAAC,GAAGH,MAAM,CAACC,QAAQ;IAC9C;IACA,OAAO,GAAGC,QAAQ,KAAKC,QAAQ,WAAW;EAC5C;EAEA,OAAO,2BAA2B;AACpC;AAEA,MAAMC,QAAQ,GAAGX,KAAK,CAACY,MAAM,CAAC;EAC5BC,OAAO,EAAEZ,cAAc,CAAC;AAC1B,CAAC,CAAC;AAEFU,QAAQ,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EAC5C,MAAMC,OAAO,GAAG,OAAOC,YAAY,KAAK,WAAW,GAAGA,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI;EACzF,IAAI;IACF,MAAMC,IAAI,GAAGH,OAAO,GAAGI,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC,GAAG,IAAI;IACjD,IAAIG,IAAI,IAAIA,IAAI,CAACG,KAAK,EAAE;MACtBP,MAAM,CAACQ,OAAO,CAACC,aAAa,GAAG,UAAUL,IAAI,CAACG,KAAK,EAAE;IACvD;EACF,CAAC,CAAC,OAAOG,CAAC,EAAE;IACV;EAAA;EAEF,OAAOV,MAAM;AACf,CAAC,CAAC;AAEF,eAAeN,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}